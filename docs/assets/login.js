const app = plunc.create("app"); app.factory('pf5',(cb4)=>{const bZ=cb4;class AppConfigObject{yn9(){if(this.env.getDeploymentName()=='production')return'unset';return'gl6d8zrgp64c03xxmindatalkstaging'}wb3(){return{wd6:()=>{if(this.env.getDeploymentName()=='production')return'unset';return'http://localhost:8233'},og5:()=>'https://4iehar5trf.execute-api.ap-southeast-1.amazonaws.com',kr9:()=>'http://localhost:8233',oh8:()=>'https://jackfruit-cdn.s3.ap-southeast-1.amazonaws.com',aj6:()=>'https://4iehar5trf.execute-api.ap-southeast-1.amazonaws.com',cf5:()=>{if(this.env.getDeploymentName()=='production')return'unset';return'http://localhost:8233'},ki9:()=>{if(this.env.getDeploymentName()=='production')return'unset';return'http://localhost:8233'},ce9:()=>{if(this.env.getDeploymentName()=='production')return'unset';return'http://localhost:5389'}}}constructor(){this.env=new bZ()}}return AppConfigObject});app.factory('cb4',()=>{class AppEnvironmentHelper{getDeploymentName(){var cA,cB;return (cB=(cA=window['deployment'])==null||cA==void 0?void 0:cA.name)!==null&&cB!==void 0?cB:'default'}}return AppEnvironmentHelper});app.factory('yy4',()=>{class km1{constructor(bN){this.gt1=bN?'1':'0'}set(bO){this.gt1=bO?'1':'0'}true(){return this.gt1=='1'}false(){return this.gt1=='0'}}return km1});app.factory('ip1',()=>{class ButtonElementHandler{constructor(E){this.state='active';this.buttonElement=E}qe3(){this.buttonElement.$element.disabled=!0;this.buttonElement.addClass('--slate-spinning-button')}wb5(){this.buttonElement.$element.disabled=!1;this.buttonElement.removeClass('--slate-spinning-button')}}return ButtonElementHandler});app.factory('mt4',()=>{class CallbackQueueObject{constructor(){this.queue=[]}add(bY){this.queue.push(bY)}withdraw(){return this.queue}}return CallbackQueueObject});app.service('hj7',()=>{var aB=(method,url,config)=>new Promise((aC,aD)=>{var _C,g={},h=(_C=config.nm2)!==null&&_C!==void 0?_C:!1;let _D='';let _e=!1;let F=!0;config.kd9!==void 0&&config.kd9 instanceof FormData?(_D=config.kd9,_e=!1,F=!1):(_D=JSON.stringify(config.kd9),_e='application/json',F=!0);if(!h){const aE=_c('app_key'),aF=localStorage.getItem(`${aE}.token`);if(aF==null){aD(Error('HttpRequestHelper::ERR100'));return}g['X-Requester-Token']=aF}$.ajax({method:method,url:url,processData:F,contentType:_e,data:_D,headers:g}).then(aG=>{var aH,aI=(aH=config.il9)!==null&&aH!==void 0?aH:!0;if(aI){if(typeof aG=='string'){aC(JSON.parse(aG));return}if(typeof aG=='object'){aC(aG);return}aD(Error(`HttpRequestHelper::ERR101`));return}aC(aG)}).catch(error=>aD(error))}),_b=aJ=>{const aK=aJ.vt2;let aL=aJ.px5;for(const aM in aK){const aN=`:${aM}`;aL.includes(aN)&&(aL=aL.split(aN).join(aK[aM]))}return aL},_c=aO=>{const aP=new URLSearchParams(window.location.search),aQ=aP.get(aO);return aQ!==null?aQ:null},_d=(aR,aS)=>{const aT=aS.gn5+_b(aS);return new Promise((resolve,reject)=>aB(aR,aT,aS).then(resolve).catch(reject))};return{an2:config=>_d('GET',config),qs3:config=>_d('POST',config),ky4:config=>_d('PUT',config),mi2:config=>_d('PATCH',config),za1:config=>_d('DELETE',config)}});app.service('lm2',()=>{class nu9{getParamValue(aU){var aV=new URLSearchParams(window.location.search),aW=aV.get(aU);return aW!==null?aW:null}}return new nu9()});app.service('ey3',()=>{class fk3{constructor(){this.options={}}set(aX){this.options=aX}get(){return this.options}}return new fk3()});app.service('xf6',(rx6)=>{const aY=rx6;var aZ='PAE';aY.xy9(aZ);return{oe2:callback=>aY.oe2(aZ,callback),ex4:()=>aY.ex4(aZ)}});app.service('rx6',()=>{class xn2{constructor(){this.tn4={}}xy9(bA){var bB=new cu9();bB.hc3(bA);!(bA in this.tn4)&&(this.tn4[bA]=bB)}oe2(bC,bD){!(bC in this.tn4)&&this.xy9(bC);this.tn4[bC].fi6(bD)}ex4(bE){if(!(bE in this.tn4))return;for(const bF of this.tn4[bE].se7())Promise.resolve(bF())}}class cu9{constructor(){(this.yp8='',this.ff7=[])}hc3(bG){this.yp8=bG}fi6(bH){this.ff7.push(bH)}se7(){return this.ff7}}return new xn2()});app.service('gw7',(rx6,yy4)=>{const bI=rx6,bJ=yy4;var bK='PEE',_E=new bJ(!0);bI.xy9(bK);let bL={code:500,message:'Unknown error',dispatcher:'PageErrorEvent'};return{oe2:callback=>bI.oe2(bK,callback),ex4:bM=>{if(_E.false())return;bL=bM;_E.set(!1);console.error(`[${bM.dispatcher}] ${bM.message}`);bI.ex4(bK)},fq1:()=>_E.true(),ag7:()=>bL}});app.service('nr8',(mt4,yy4,hj7,pf5)=>{const bP=mt4,bQ=yy4,bR=hj7,bS=pf5;var bT=new bS(),_f={};return{tg1:(bU,bV)=>{!(bU in _f)&&(_f[bU]={listeners:new bP(),data:null,state:{loading:new bQ(!1),ready:new bQ(!1)}});if(_f[bU].state.ready.true()){bV(_f[bU].data);return}_f[bU].state.loading.false()&&(_f[bU].state.loading.set(!0),bR.an2({gn5:bT.wb3().ce9(),px5:'/:tenantId/rehearsal/yotpo/orders/v3/get/single?reference_id=:reference_id',vt2:{tenantId:bT.yn9(),reference_id:bU},nm2:!0}).then(bW=>{_f[bU].state.ready.set(!0);_f[bU].data=bW;var bX=_f[bU].listeners.withdraw();for(let i=0;i<bX.length;i++)bX[i](bW)}).catch(error=>bV(Error(error))));_f[bU].listeners.add(bV)}}});app.helper('vn8',($scope,$patch,$block)=>{const cC=$scope,cD=$patch,cE=$block;var cF='BlockManager';class ox7{constructor(cG){this.ct7=cC;this.mi2=cD;this.sh6=cG;var cH=cG.split('/');if(cH[0]!==''||cH[1]!==cF||!cH[2].length||cH[3]!=='')throw Error(`Invalid block namespace structure "${cG}"`);this.yp8=cH[2];!(cF in this.ct7)&&(this.ct7[cF]={});if(this.yp8 in this.ct7[cF])throw Error(`Duplicate block registration "${cG}"`);this.ct7[cF][this.yp8]={state:'empty'}}async nc4(cI){{this.ct7[cF][this.yp8].state=cI;await this.mi2(this.sh6);return null}}up7(){return this.nc4('active')}gn9(){return this.nc4('error')}yl3(){return this.nc4('loading')}an8(){return this.nc4('empty')}cn4(){return this.nc4('ready')}fz9(){return this.nc4('completed')}zp7(){return new Promise(resolve=>cE(this.sh6,element=>resolve(element)))}yr6(){return this.ct7[cF][this.yp8].state}ds9(cJ,cK){if(cJ=='state')return;this.ct7[cF][this.yp8][cJ]=cK}bk9(cL){var cM;return (cM=this.ct7[cF][this.yp8][cL])!==null&&cM!==void 0?cM:null}}return ox7});app.helper('pq6',($scope,$patch)=>{const cN=$scope,cO=$patch;class ox7{constructor(){this.qk4={};this.co1=null}oq7(cQ){this.ct7=cQ}po2(cR){this.mi2=cR}ku8(cS){this.co1=cS}xy9(cT,cU){if(cT in this.qk4){console.error(`Duplicate callback for component state "${cT}"`);return this}this.qk4[cT]=cU;return this}ga7(cV){return new Promise(async (cW,cX)=>{try {this.ct7.state=cV;await this.mi2();cV in this.qk4&&await this.qk4[cV]();cW()} catch (cY) {cX(cY)}})}yr6(){return this.ct7.state}}var cP=new ox7();cP.oq7(cN);cP.po2(cO);return cP});app.component('tz6',($scope,$patch,$app,pq6,gw7,xf6,hj7,pf5,ey3,nr8)=>{const cZ=$scope,dA=$patch,dB=$app,dC=pq6,dD=gw7,_F=xf6,G=hj7,H=pf5,i=ey3,j=nr8;var k=new H(),l=dE=>{const dF=new URLSearchParams(window.location.search),dG=dF.get(dE);return dG!==null?dG:null},m=appkey=>new Promise(async dH=>{try {const dI=localStorage.getItem(`${appkey}.token`);if(dI==null)throw Error('Store token not found');const dJ=await G.an2({gn5:k.wb3().ce9(),px5:'/:tenantId/identity-authority/yotpo/token/refresh',vt2:{tenantId:k.yn9()}});localStorage.setItem(`${appkey}.token`,dJ.token);dH(!0)} catch (dK) {console.error(dK);dH(!1)}}),n={missingParams:'There appears to be missing key and value parameters in your request.',recordNotFound:'We cannot find what you are looking for.'},o=async ()=>{await dC.ga7('active');_F.ex4()};cZ.state='loading';dB.ready(async ()=>setTimeout(async ()=>{if(!dD.fq1()){cZ.error=dD.ag7();await dC.ga7('error');return}if(location.href.includes('collections.html')){i.set({StoreNameView:!0,PaginationControl:!0,SearchBar:!0});var dL=l('app_key');if(dL==null){cZ.error={code:400,message:n.missingParams,dispatcher:'AppRouter'};await dC.ga7('error');return}if(!await m(dL)){location.href=`/login.html?app_key=${dL}`;return}}if(location.href.includes('checkout.html')){i.set({StoreNameView:!0,PaginationControl:!1,SearchBar:!1});var dM=l('app_key');if(dM==null){cZ.error={code:400,message:n.missingParams,dispatcher:'AppRouter'};await dC.ga7('error');return}if(!await m(dM)){location.href=`/login.html?app_key=${dM}`;return}}if(location.href.includes('confirmation.html')){i.set({StoreNameView:!1,PaginationControl:!1,SearchBar:!1});var dN=l('id');if(dN==null){cZ.error={code:400,message:n.missingParams,dispatcher:'AppRouter'};await dC.ga7('error');return}j.tg1(dN,async dO=>{if(dO instanceof Error){cZ.error={code:404,message:n.recordNotFound,dispatcher:'AppRouter'};await dC.ga7('error');return}await o()});return}await o()},3000));return{}});app.component('zi1',($scope,$patch,gw7,xf6,pq6,cc5,bb6,vn8,lm2,hj7,ip1,pf5)=>{const dP=$scope,dQ=$patch,dR=gw7,dS=xf6,dT=pq6,dU=cc5,_g=bb6,_h=vn8,I=lm2,J=hj7,K=ip1,L=pf5;var M=new L(),N=new _h('/BlockManager/SendButtonBlock/'),O=()=>dP.appkey!==null&&dP.secretkey!==null&&N.cn4(),p=new _h('/BlockManager/LoginFormMessage/');dS.oe2(async ()=>{await dT.ga7('active');dP.appkey=I.getParamValue('app_key');dP.secretkey=null;await dU.jl5(dP.appkey);await _g.jl5();dU.lp8((dV,dW)=>dW&&(dP.appkey=dV,O()));_g.lp8((dX,dY)=>dY&&(dP.secretkey=dX,O()))});dP.login=dZ=>{var eA=new K(dZ);eA.qe3();J.qs3({gn5:M.wb3().ce9(),px5:'/:tenantId/rehearsal/yotpo/token/generate',vt2:{tenantId:M.yn9()},kd9:{app_key:dP.appkey,secret_key:dP.secretkey},nm2:!0}).then(eB=>{localStorage.setItem(`${dP.appkey}.token`,eB.token);location.href='/collections.html?app_key='+dP.appkey}).catch(()=>{eA.wb5();p.gn9()})};return{jl5:()=>new Promise(async eC=>{await dT.ga7('active');eC(null)})}});app.component('cc5',($scope,$patch,gw7,xf6,pq6,mt4,yy4)=>{const eD=$scope,eE=$patch,eF=gw7,eG=xf6,eH=pq6,eI=mt4,_G=yy4;var _H=new eI(),_i=new _G();eG.oe2(async ()=>await eH.ga7('active'));eD.validate=()=>{_i.set(eD.value!==null&&eD.value.trim()!=='');for(const eJ of _H.withdraw())eJ(eD.value,_i.true())};return{jl5:appkey=>new Promise(async eK=>{appkey!==null&&(eD.value=appkey);await eH.ga7('active');eK(null)}),lp8:callback=>_H.add(callback)}});app.component('bb6',($scope,$patch,gw7,xf6,pq6,mt4,yy4)=>{const eL=$scope,eM=$patch,eN=gw7,eO=xf6,eP=pq6,eQ=mt4,eR=yy4;var eS=new eQ(),_I=new eR();eO.oe2(async ()=>await eP.ga7('active'));eL.validate=()=>{_I.set(eL.value!==null&&eL.value.trim()!=='');for(const eT of eS.withdraw())eT(eL.value,_I.true())};return{jl5:()=>new Promise(async eU=>{await eP.ga7('active');eU(null)}),lp8:callback=>eS.add(callback)}});