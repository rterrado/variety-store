const app = plunc.create("app"); app.factory('jc9',()=>{class je7{constructor(aJ){this.bh5=aJ?'1':'0'}set(aK){this.bh5=aK?'1':'0'}true(){return this.bh5=='1'}false(){return this.bh5=='0'}}return je7});app.factory('nd8',()=>{class CallbackQueueObject{constructor(){this.queue=[]}add(D){this.queue.push(D)}withdraw(){return this.queue}}return CallbackQueueObject});app.service('st9',(bt7)=>{const _A=bt7;var _b='PAE';_A.js3(_b);return{fi1:callback=>_A.fi1(_b,callback),iq5:()=>_A.iq5(_b)}});app.service('bt7',()=>{class uw1{constructor(){this.id2={}}js3(E){var _B=new pb2();_B.zc2(E);!(E in this.id2)&&(this.id2[E]=_B)}fi1(aA,aB){!(aA in this.id2)&&this.js3(aA);this.id2[aA].fm9(aB)}iq5(aC){if(!(aC in this.id2))return;for(const aD of this.id2[aC].ck4())Promise.resolve(aD())}}class pb2{constructor(){(this.hc2='',this.os9=[])}zc2(aE){this.hc2=aE}fm9(aF){this.os9.push(aF)}ck4(){return this.os9}}return new uw1()});app.service('at2',(bt7,jc9)=>{const aG=bt7,aH=jc9;var _c='PEE',_e=new aH(!0);aG.js3(_c);let _d={code:500,message:'Unknown error',dispatcher:'PageErrorEvent'};return{fi1:callback=>aG.fi1(_c,callback),iq5:aI=>{if(_e.false())return;_d=aI;_e.set(!1);console.error(`[${aI.dispatcher}] ${aI.message}`);aG.iq5(_c)},ou7:()=>_e.true(),wu2:()=>_d}});app.helper('ou9',($scope,$patch,$block)=>{const aL=$scope,aM=$patch,_C=$block;var _D='BlockManager';class my8{constructor(aN){this.pd4=aL;this.eq5=aM;this.vl7=aN;var aO=aN.split('/');if(aO[0]!==''||aO[1]!==_D||!aO[2].length||aO[3]!=='')throw Error(`Invalid block namespace structure "${aN}"`);this.hc2=aO[2];!(_D in this.pd4)&&(this.pd4[_D]={});if(this.hc2 in this.pd4[_D])throw Error(`Duplicate block registration "${aN}"`);this.pd4[_D][this.hc2]={state:'empty'}}async ze9(aP){{this.pd4[_D][this.hc2].state=aP;await this.eq5(this.vl7);return null}}od6(){return this.ze9('active')}ja3(){return this.ze9('error')}op7(){return this.ze9('loading')}zc5(){return this.ze9('empty')}ab8(){return this.ze9('ready')}bk1(){return this.ze9('completed')}ig8(){return new Promise(resolve=>_C(this.vl7,element=>resolve(element)))}io3(){return this.pd4[_D][this.hc2].state}ru6(aQ,aR){if(aQ=='state')return;this.pd4[_D][this.hc2][aQ]=aR}ju1(aS){var aT;return (aT=this.pd4[_D][this.hc2][aS])!==null&&aT!==void 0?aT:null}}return my8});app.helper('fn1',($scope,$patch)=>{const aU=$scope,aV=$patch;class my8{constructor(){this.nn1={};this.ml8=null}aa9(aX){this.pd4=aX}if8(aY){this.eq5=aY}mx3(aZ){this.ml8=aZ}js3(bA,bB){if(bA in this.nn1){console.error(`Duplicate callback for component state "${bA}"`);return this}this.nn1[bA]=bB;return this}hk6(bC){return new Promise(async (bD,bE)=>{try {this.pd4.state=bC;await this.eq5();bC in this.nn1&&await this.nn1[bC]();bD()} catch (bF) {bE(bF)}})}io3(){return this.pd4.state}}var aW=new my8();aW.aa9(aU);aW.if8(aV);return aW});app.component('vw7',($scope,$patch,$app,fn1,at2,st9)=>{const bG=$scope,bH=$patch,bI=$app,bJ=fn1,_E=at2,F=st9;bG.state='loading';bI.ready(async ()=>setTimeout(async ()=>{if(!_E.ou7()){bG.error=_E.wu2();await bJ.hk6('error');return}await g()},3000));var g=async ()=>{await bJ.hk6('active');F.iq5()};return{}});app.component('fm1',($scope,$patch,at2,st9,fn1,bj9,md1,ou9)=>{const bK=$scope,bL=$patch,bM=at2,bN=st9,bO=fn1,_f=bj9,G=md1;bN.fi1(async ()=>{await bO.hk6('active');await _f.mv1();await G.mv1();_f.fs1((value,valid)=>console.log({value,valid}))});return{mv1:()=>new Promise(async bP=>{await bO.hk6('active');bP(null)})}});app.component('bj9',($scope,$patch,at2,st9,fn1,nd8,jc9)=>{const bQ=$scope,bR=$patch,bS=at2,bT=st9,bU=fn1,_F=nd8,_g=jc9;var h=new _F(),i=new _g();bT.fi1(async ()=>await bU.hk6('active'));bQ.validate=()=>{i.set(bQ.value!==null&&bQ.value.trim()!=='');for(const bV of h.withdraw())bV(bQ.value,i.true())};return{mv1:()=>new Promise(async bW=>{await bU.hk6('active');bW(null)}),fs1:callback=>h.add(callback)}});app.component('md1',($scope,$patch,at2,st9,fn1,nd8,jc9)=>{const bX=$scope,bY=$patch,bZ=at2,cA=st9,cB=fn1,cC=nd8,_G=jc9;var H=new cC(),I=new _G();cA.fi1(async ()=>await cB.hk6('active'));bX.validate=()=>{I.set(bX.value!==null&&bX.value.trim()!=='');for(const cD of H.withdraw())cD(bX.value,I.true())};return{mv1:()=>new Promise(async cE=>{await cB.hk6('active');cE(null)}),fs1:callback=>H.add(callback)}});